(function(t){function e(e){for(var n,i,c=e[0],s=e[1],p=e[2],u=0,d=[];u<c.length;u++)i=c[u],o[i]&&d.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,p||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,c=1;c<r.length;c++){var s=r[c];0!==o[s]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},o={app:0},a=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var p=0;p<c.length;p++)e(c[p]);var l=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("64a9"),o=r.n(n);o.a},"26e0":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=r("5c96"),a=(r("0fae"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("vue项目实现图片裁剪功能")]),r("el-tabs",{staticClass:"tabs",attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"使用cropperjs插件实现（一）",name:"first"}},[r("div",{staticClass:"crop1"},[r("cropper",{attrs:{data:t.slide}})],1)]),r("el-tab-pane",{attrs:{label:"使用cropperjs插件实现（二）",name:"second"}},[r("cropper-one",{attrs:{data:t.slide1}})],1),r("el-tab-pane",{attrs:{label:"使用cropperjs插件实现（三）",name:"third"}},[r("h2",[t._v("可以回显裁剪框并获取裁剪后的数据")]),"third"===t.activeName?r("cropper-two",{attrs:{cropOption:t.cropOption,originImg:t.slide2.oriUrl,previewImg:t.slide2.preUrl},on:{getCropImg:function(e){return t.getCropImg(arguments)}}}):t._e()],1),r("el-tab-pane",{attrs:{label:"使用canvas实现",name:"fourth"}},[r("cropper-canvas",{attrs:{data:t.slideCanvas}})],1)],1)],1)}),i=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.data.src?r("div",{staticClass:"rc-cropper"},[r("canvas",{ref:"canvas",attrs:{id:t.data.src}}),r("div",{staticClass:"rc-cropper__iconCrop1"},[r("el-tooltip",{attrs:{content:"裁剪",placement:"right"}},[r("el-button",{attrs:{type:"primary",size:"small",disabled:t.croppShow},on:{click:function(e){return t.initCropper()}}},[t._v("裁剪")])],1),t.cropper?r("el-tooltip",{attrs:{content:"确认裁剪",placement:"right"}},[r("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.sureCropper()}}},[r("i",{staticClass:"el-icon-check"})])],1):t._e(),t.cropper?r("el-tooltip",{attrs:{content:"取消裁剪",placement:"right"}},[t.cropper?r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.cancelCropper()}}},[r("i",{staticClass:"el-icon-close"})]):t._e()],1):t._e()],1)]):t._e()},s=[],p=r("bab4"),l=r.n(p),u=(r("4604"),{name:"cropper",props:{data:{type:Object,required:!0,default:function(){}}},data:function(){return{cropper:null,croppShow:!1}},mounted:function(){this.drawImg()},methods:{drawImg:function(t){var e=this;this.$nextTick(function(){var r=document.getElementById(e.data.src);if(r){r.width=720,r.height=480;var n=r.getContext("2d");n.clearRect(0,0,r.width,r.height);var o=new Image;o.crossOrigin="Anonymous",o.src=t||e.data.src,o.onload=function(){n.drawImage(o,0,0,r.width,r.height)}}})},initCropper:function(){this.drawImg(),this.croppShow=!0;var t=new l.a(this.$refs.canvas,{checkCrossOrigin:!0,viewMode:2,aspectRatio:1.5});this.cropper=t},sureCropper:function(){var t=this;this.cropper.getCroppedCanvas().toBlob(function(e){var r=window.URL.createObjectURL(e);t.drawImg(r)},"image/jpeg"),this.cancelCropper()},cancelCropper:function(){this.cropper.destroy(),this.croppShow=!1,this.cropper=null}}}),d=u,h=(r("71ee"),r("2877")),f=Object(h["a"])(d,c,s,!1,null,null,null),g=f.exports,m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.data.src?r("div",{staticClass:"rc-cropper-one"},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"rc-cropper__canvasCrop"},[r("canvas",{ref:"canvas",attrs:{id:t.data.src}}),r("div",{staticClass:"rc-cropper__iconCropOne"},[r("el-tooltip",{attrs:{content:"裁剪",placement:"right"}},[r("el-button",{attrs:{type:"success",size:"small",disabled:t.croppShow},on:{click:function(e){return t.initCropper()}}},[t._v("裁剪")])],1),t.cropper?r("el-tooltip",{attrs:{content:"取消裁剪",placement:"right"}},[t.cropper?r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.cancelCropper()}}},[r("i",{staticClass:"el-icon-close"})]):t._e()],1):t._e()],1)])]),r("el-col",{attrs:{span:11,offset:1}},[r("img",{attrs:{src:t.cropImg,alt:"裁剪后图片"}})])],1):t._e()},v=[],w={name:"cropper",props:{data:{type:Object,required:!0,default:function(){}}},data:function(){return{cropper:null,croppShow:!1,cropImg:""}},mounted:function(){this.drawImg()},methods:{drawImg:function(t){var e=this;this.$nextTick(function(){var r=document.getElementById(e.data.src);if(r){r.width=720,r.height=480;var n=r.getContext("2d");n.clearRect(0,0,r.width,r.height);var o=new Image;o.crossOrigin="Anonymous",o.src=t||e.data.src,o.onload=function(){n.drawImage(o,0,0,r.width,r.height)}}})},initCropper:function(){var t=this;this.drawImg(),this.croppShow=!0;var e=new l.a(this.$refs.canvas,{checkCrossOrigin:!0,viewMode:2,aspectRatio:1.5,crop:function(){t.sureCropper()}});this.cropper=e},sureCropper:function(){var t=this;this.cropper.getCroppedCanvas().toBlob(function(e){var r=window.URL.createObjectURL(e);t.cropImg=r},"image/jpeg")},cancelCropper:function(){this.cropper.destroy(),this.croppShow=!1,this.cropper=null}}},b=w,C=(r("8ae0"),Object(h["a"])(b,m,v,!1,null,null,null)),_=C.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.originImg?r("div",{staticClass:"rc-cropper"},[r("el-row",[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"rc-cropper__canvasCrop2"},[t.cropper?t._e():r("img",{attrs:{src:t.originImg}}),r("canvas",{ref:"canvas",attrs:{id:t.originImg}}),r("div",{staticClass:"rc-cropper__iconCrop"},[t.cropper?r("el-tooltip",{attrs:{content:"确认裁剪",placement:"right"}},[r("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.sureCropper()}}},[r("i",{staticClass:"el-icon-check"})])],1):t._e()],1)])]),r("el-col",{attrs:{span:10}},[r("div",{staticClass:"rc-cropper__previewImg"},[r("img",{attrs:{src:t.previewImg,id:"previewImg"}})])])],1)],1):t._e()},y=[],O=(r("c5f6"),{name:"rc-cropper2",props:{cropOption:{type:Object,required:!0,default:function(){}},originImg:{required:!0},previewImg:{type:String}},data:function(){return{cropper:null,croppShow:!1}},mounted:function(){this.drawImg()},methods:{drawImg:function(){var t=this,e=this;this.$nextTick(function(){var r=document.getElementById(t.originImg);if(r){r.width=720,r.height=480;var n=r.getContext("2d");n.clearRect(0,0,r.width,r.height);var o=new Image;o.crossOrigin="Anonymous",o.src=t.originImg,o.onload=function(){n.drawImage(o,0,0,r.width,r.height),e.initCropper()}}})},initCropper:function(){var t=this;this.croppShow=!0,this.cropper=new l.a(this.$refs.canvas,{checkCrossOrigin:!0,viewMode:3,zoomOnWheel:!1,aspectRatio:1.5,ready:function(){t.cropper.setData({x:Number(t.cropOption.offset_x),y:Number(t.cropOption.offset_y),width:Number(t.cropOption.width),height:Number(t.cropOption.height)})}})},sureCropper:function(){var t=this,e=this.cropper.getData();this.cropper.getCroppedCanvas().toBlob(function(r){var n=new FileReader;n.onloadend=function(r){var n=r.target.result;t.$emit("getCropImg",n,e)},n.readAsDataURL(r)},"image/jpeg")}}}),k=O,j=(r("590b"),Object(h["a"])(k,I,y,!1,null,null,null)),x=j.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rc-cropper-canvas"},[r("el-col",{attrs:{span:12}},[r("canvas",{attrs:{id:t.data.img_url}}),r("el-button",{staticClass:"rc-crop__iconCropCanvas",attrs:{type:"danger",size:"small"},on:{click:function(e){return t.cropImg()}}},[t._v("裁剪")])],1),r("el-col",{attrs:{span:12}},[r("canvas",{attrs:{id:t.data.img_url+"after"}})])],1)},R=[],S={name:"cropper-canvas",props:{data:{type:Object,required:!0,default:function(){}}},mounted:function(){this.drawImg()},methods:{drawImg:function(){var t=this;this.$nextTick(function(){var e=document.getElementById(t.data.img_url);if(e){e.width=460,e.height=460;var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);var n=new Image;n.crossOrigin="Anonymous",n.src=t.data.src,n.onload=function(){r.drawImage(n,0,0,e.width,e.height)}}})},cropImg:function(){var t=this,e=document.getElementById(this.data.img_url),r=e.getContext("2d"),n=new Image;n.onload=function(){r.drawImage(n,0,0,e.width,e.height)},n.src=this.data.src;var o=!1,a=!1,i=0,c=0,s=0,p=0,l=0,u=0,d=0,h=0;e.onmousedown=function(t){r.beginPath(),r.setLineDash([6,6]),r.moveTo(d,h),r.lineTo(d+i,h),r.lineTo(d+i,h+c),r.lineTo(d,h+c),r.lineTo(d,h),r.strokeStyle="green",r.stroke(),r.isPointInPath(t.offsetX,t.offsetY)?(o=!0,l=t.offsetX,u=t.offsetY,s=d,p=h):(r.clearRect(0,0,e.width,e.height),r.drawImage(n,0,0,e.width,e.height),a=!0,s=t.offsetX,p=t.offsetY,d=t.offsetX,h=t.offsetY)},e.onmouseup=function(){a&&(a=!1,t.sureCrop(s,p,i,c)),o&&(o=!1,t.sureCrop(d,h,i,c))},e.onmousemove=function(t){a&&(r.clearRect(0,0,e.width,e.height),r.drawImage(n,0,0,e.width,e.height),i=t.offsetX-s,c=t.offsetY-p,r.beginPath(),r.strokeStyle="#FF0000",r.strokeRect(s,p,i,c),r.closePath()),o&&(r.clearRect(0,0,e.width,e.height),r.drawImage(n,0,0,e.width,e.height),r.beginPath(),d=s+t.offsetX-l,h=p+t.offsetY-u,r.strokeStyle="yellow",r.strokeRect(d,h,i,c),r.closePath())}},sureCrop:function(t,e,r,n){var o=document.getElementById(this.data.img_url+"after"),a=o.parentElement;o.width=a.offsetWidth,o.height=2*a.offsetWidth/3;var i=o.getContext("2d"),c=new Image;c.src=this.data.src,c.onload=function(){i.beginPath(),i.moveTo(t,e),i.lineTo(t+r,e),i.lineTo(t+r,e+n),i.lineTo(t,e+n),i.clip(),i.drawImage(c,0,0,o.width,o.height)},i.stroke()}}},P=S,$=(r("c8f3"),Object(h["a"])(P,T,R,!1,null,null,null)),E=$.exports,B={name:"app",components:{Cropper:g,CropperOne:_,CropperTwo:x,CropperCanvas:E},data:function(){return{activeName:"first",slide:{src:"https://avatars0.githubusercontent.com/u/26196557?s=460&v=40"},slide1:{src:"https://avatars3.githubusercontent.com/u/7911342?s=460&v=4"},cropOption:{offset_x:0,offset_y:0,width:720,height:480},slide2:{oriUrl:"https://avatars1.githubusercontent.com/u/23690568?s=460&v=4",preUrl:"https://avatars1.githubusercontent.com/u/23690568?s=460&v=4"},slideCanvas:{img_url:"https://avatars3.githubusercontent.com/u/44808093?s=460&v=4",src:"https://avatars3.githubusercontent.com/u/44808093?s=460&v=4"}}},methods:{getCropImg:function(t){console.log(t),this.slide2.preUrl=t[0]}}},U=B,N=(r("034f"),Object(h["a"])(U,a,i,!1,null,null,null)),z=N.exports;n["default"].config.productionTip=!1,n["default"].use(o["Button"]),n["default"].use(o["Row"]),n["default"].use(o["Col"]),n["default"].use(o["Tooltip"]),n["default"].use(o["Tabs"]),n["default"].use(o["TabPane"]),new n["default"]({render:function(t){return t(z)}}).$mount("#app")},"590b":function(t,e,r){"use strict";var n=r("b18a"),o=r.n(n);o.a},"64a9":function(t,e,r){},"71ee":function(t,e,r){"use strict";var n=r("26e0"),o=r.n(n);o.a},8839:function(t,e,r){},"8ae0":function(t,e,r){"use strict";var n=r("8839"),o=r.n(n);o.a},aaab:function(t,e,r){},b18a:function(t,e,r){},c8f3:function(t,e,r){"use strict";var n=r("aaab"),o=r.n(n);o.a}});
//# sourceMappingURL=app.f2143d4c.js.map